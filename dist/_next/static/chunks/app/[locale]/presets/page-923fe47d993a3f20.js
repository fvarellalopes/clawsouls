(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{6930:(e,t,r)=>{Promise.resolve().then(r.bind(r,2985))},2985:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),n=r(7266),o=r(4085),i=r(4616),l=r(6046),u=r(7364),c=r(7401);let d=(0,c.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=(0,c.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var g=r(8173),h=r.n(g);function v(){let e=(0,n.useTranslations)("presetsPage"),{loadPreset:t}=(0,i.o)(),r=(0,l.useRouter)(),[c,g]=(0,a.useState)([]),[v,f]=(0,a.useState)(0),[p,x]=(0,a.useState)(!0),[b,y]=(0,a.useState)(""),[S,j]=(0,a.useState)(null),[w,N]=(0,a.useState)([]);(0,a.useEffect)(()=>{I(),k()},[b,S]);let k=async()=>{let e=await fetch("/api/presets?limit=1");if(e.ok){var t;let r=await e.json();(null===(t=r.facets)||void 0===t?void 0:t.creature)&&N(r.facets.creature)}},I=async()=>{x(!0);let e=new URLSearchParams({limit:"50",offset:"0",...b&&{search:b},...S&&{creature:S}}),t=await fetch("/api/presets?".concat(e.toString()));if(t.ok){let e=await t.json();g(e.data),f(e.meta.total)}x(!1)},P=e=>{t(e),r.push("/editor")};return(0,s.jsx)("div",{className:"min-h-screen py-12 px-4",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)(o.$n,{asChild:!0,variant:"ghost",children:(0,s.jsxs)(h(),{href:"/",children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),e("backToHome")]})}),(0,s.jsx)("h1",{className:"text-4xl font-bold mt-4",children:e("title")}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:e("subtitle",{total:v})})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"text",placeholder:e("searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border rounded-md",value:b,onChange:e=>y(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("select",{className:"border rounded-md px-3 py-2",value:S||"",onChange:e=>j(e.target.value||null),children:[(0,s.jsx)("option",{value:"",children:e("allCreatures")}),w.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),p?(0,s.jsx)("div",{className:"text-center py-12",children:e("loading")}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:c.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>P(e),children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:e.emoji}),(0,s.jsx)("h3",{className:"font-semibold truncate",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.creature}),e.tags&&e.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.slice(0,2).map(e=>(0,s.jsx)("span",{className:"text-xs bg-secondary px-2 py-0.5 rounded",children:e},e))})]},e.id))}),!p&&0===c.length&&(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:e("noPresetsFound")})]})})}},4085:(e,t,r)=>{"use strict";r.d(t,{$n:()=>i});var s=r(5155),a=r(2115),n=r(9602),o=r(2317);let i=a.forwardRef((e,t)=>{let{className:r,variant:a="default",size:i="default",asChild:l=!1,...u}=e,c=l?o.DX:"button";return(0,s.jsx)(c,{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===a,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===a,"border border-input bg-background hover:bg-accent hover:text-accent-foreground":"outline"===a,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===a,"hover:bg-accent hover:text-accent-foreground":"ghost"===a,"text-primary underline-offset-4 hover:underline":"link"===a,"h-10 px-4 py-2":"default"===i,"h-9 rounded-md px-3":"sm"===i,"h-11 rounded-md px-8":"lg"===i,"h-10 w-10":"icon"===i},r),ref:t,...u})});i.displayName="Button"},9602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(3463),a=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},7364:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8358:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});let s=(0,r(9827).v)(e=>({lastSaved:null,isSaving:!1,setLastSaved:t=>e({lastSaved:t}),setIsSaving:t=>e({isSaving:t})}))},4616:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var s=r(9827),a=r(709);let n=(0,s.v)()((0,a.Zr)((e,t)=>({past:[],future:[],maxSize:50,push:r=>{let{past:s,maxSize:a}=t(),n=[...s,r];n.length>a&&n.shift(),e({past:n,future:[]})},undo:r=>{let{past:s,future:a}=t();if(0===s.length)return r;let n=s[s.length-1];return e({past:s.slice(0,s.length-1),future:[r,...a]}),n},redo:r=>{let{past:s,future:a}=t();if(0===a.length)return r;let n=a[0];return e({past:[...s,r],future:a.slice(1)}),n},canUndo:()=>t().past.length>0,canRedo:()=>t().future.length>0,clear:()=>e({past:[],future:[]})}),{name:"history-storage",partialize:e=>({past:e.past.slice(-10),future:e.future.slice(0,5)})}));var o=r(8358);let i=(0,s.v)()((0,a.Zr)((e,t)=>({soul:{name:"",creature:"",vibe:"",emoji:"",avatar:void 0,coreTruths:{helpful:!0,opinions:!0,resourceful:!0,trustworthy:!0,respectful:!0},boundaries:{private:!0,askBeforeActing:!0,noHalfBaked:!0,notVoiceProxy:!0},vibeStyle:"concise",continuity:!0,humor:50,formality:50,emojiUsage:30,verbosity:50,consciousness:50,questioning:30},isDarkMode:!1,locale:"en",setSoul:r=>{let s={...t().soul,...r};e({soul:s}),setTimeout(()=>{n.getState().push(s)},100),setTimeout(()=>{o.B.getState().setIsSaving(!0),setTimeout(()=>{o.B.getState().setLastSaved(Date.now()),o.B.getState().setIsSaving(!1)},500)},200)},setIsDarkMode:t=>e({isDarkMode:t}),setLocale:t=>e({locale:t}),resetSoul:()=>{let t={name:"",creature:"",vibe:"",emoji:"",avatar:void 0,coreTruths:{helpful:!0,opinions:!0,resourceful:!0,trustworthy:!0,respectful:!0},boundaries:{private:!0,askBeforeActing:!0,noHalfBaked:!0,notVoiceProxy:!0},vibeStyle:"concise",continuity:!0,humor:50,formality:50,emojiUsage:30,verbosity:50,consciousness:50,questioning:30};e({soul:t}),n.getState().push(t)},loadPreset:t=>{var r,s,a,o,i,l;let u={name:t.name,creature:t.creature,vibe:t.vibe,emoji:t.emoji,avatar:t.avatar,coreTruths:t.coreTruths,boundaries:t.boundaries,vibeStyle:t.vibeStyle,continuity:!0,humor:null!==(r=t.humor)&&void 0!==r?r:50,formality:null!==(s=t.formality)&&void 0!==s?s:50,emojiUsage:null!==(a=t.emojiUsage)&&void 0!==a?a:30,verbosity:null!==(o=t.verbosity)&&void 0!==o?o:50,consciousness:null!==(i=t.consciousness)&&void 0!==i?i:50,questioning:null!==(l=t.questioning)&&void 0!==l?l:30};e({soul:u}),n.getState().push(u)},undo:()=>{let r=t().soul,s=n.getState().undo(r);s&&(e({soul:s}),setTimeout(()=>{n.getState().push(s)},100))},redo:()=>{let r=t().soul,s=n.getState().redo(r);s&&(e({soul:s}),setTimeout(()=>{n.getState().push(s)},100))},canUndo:()=>n.getState().canUndo(),canRedo:()=>n.getState().canRedo()}),{name:"soul-storage",partialize:e=>({soul:e.soul,isDarkMode:e.isDarkMode,locale:e.locale})}))},709:(e,t,r)=>{"use strict";r.d(t,{Zr:()=>a});let s=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>s(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},a=(e,t)=>(r,a,n)=>{let o,i={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let s=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=r.getItem(e))?t:null;return a instanceof Promise?a.then(s):s(a)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,u=0,c=new Set,d=new Set,m=i.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...e)},a,n);let g=()=>{let e=i.partialize({...a()});return m.setItem(i.name,{state:e,version:i.version})},h=n.setState;n.setState=(e,t)=>(h(e,t),g());let v=e((...e)=>(r(...e),g()),a,n);n.getInitialState=()=>v;let f=()=>{var e,t;if(!m)return;let n=++u;l=!1,c.forEach(e=>{var t;return e(null!=(t=a())?t:v)});let h=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=a())?e:v))||void 0;return s(m.getItem.bind(m))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){let t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;if(n!==u)return;let[s,l]=e;if(r(o=i.merge(l,null!=(t=a())?t:v),!0),s)return g()}).then(()=>{n===u&&(null==h||h(o,void 0),o=a(),l=!0,d.forEach(e=>e(o)))}).catch(e=>{n===u&&(null==h||h(void 0,e))})};return n.persist={setOptions:e=>{i={...i,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},i.skipHydration||f(),o||v}},9827:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var s=r(2115);let a=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(s,a,n);return n},n=e=>e?a(e):a,o=e=>e,i=e=>{let t=n(e),r=e=>(function(e,t=o){let r=s.useSyncExternalStore(e.subscribe,s.useCallback(()=>t(e.getState()),[e,t]),s.useCallback(()=>t(e.getInitialState()),[e,t]));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?i(e):i}},e=>{var t=t=>e(e.s=t);e.O(0,[260,266,173,441,517,358],()=>t(6930)),_N_E=e.O()}]);